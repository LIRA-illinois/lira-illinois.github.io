---
import { Image } from "astro:assets";
import BaseLayout from "./BaseLayout.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
const { title, subtitle, date, imageUrl, imageAlt } = Astro.props;

const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/research/*.{jpeg,jpg,png,gif,webp}",
);
if (!images[imageUrl])
  throw new Error(
    `"${imageUrl}" does not exist in glob: "/src/assets/research/*.{jpeg,jpg,png,gif}"`,
  );
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
  <div class="post-container">
    <div class="image-container">
      <Image src={images[imageUrl]()} alt={imageAlt} />
    </div>
    <h1>{title}</h1>
    <h6>{subtitle}</h6>
    <h6>
      {
        date.toLocaleDateString("en-US", {
          year: "numeric",
          month: "long",
          day: "numeric",
        })
      }
    </h6>
    <hr />
    <slot />
  </div>
</BaseLayout>
<style>
  .post-container {
    margin: 0 auto;
    max-width: var(--medium-width);
  }
  .post-container h6 {
    color: var(--secondary-color);
    font-weight: normal;
    margin-top: 0.5em;
  }
  .image-container {
    margin-bottom: 1em;
  }
</style>
